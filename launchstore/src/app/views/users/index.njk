{% extends 'layout.njk' %}

{% block content %}

<section class="user-dashboard container form">
    <form method="POST" action="/users?_method=PUT">
        <div class="header">
            <h3>Detalhes</h3>
        </div>
        <div class="fields">
            {% include 'users/fields.njk' %}
            <input
                type="hidden"
                name="id"
                value="{{ user.id }}"
            >
        </div>

        <button class="button" type="submit">Atualizar</button>

    </form>
    <form id="form-delete" method="POST" action="/users?_method=DELETE">
        <input
            type="hidden"
            name="id"
            value="{{ user.id }}"
        >
        <button class="button delete" type="submit">Deletar</button>
    </form>
</section>

<script>
    const formDelete = document.querySelector('#form-delete')

    formDelete.addEventListener('submit', event => {
        const confirmation = confirm('Tem certeza que deseja excluir sua conta? Ela não poderá ser recuperada.')

        if (!confirmation) 
            event.preventDefault()
    })
</script>

{% endblock %}